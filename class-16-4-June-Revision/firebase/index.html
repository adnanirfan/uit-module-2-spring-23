<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Document</title>
    <script type="module">
      // Import the functions you need from the SDKs you need
      import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
      import {
        getDatabase,
        ref,
        set,
      } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-database.js";
      // TODO: Add SDKs for Firebase products that you want to use
      // https://firebase.google.com/docs/web/setup#available-libraries

      // Your web app's Firebase configuration
      const firebaseConfig = {
        apiKey: "AIzaSyBsS60dv4tgZEWNzW5XUhygg5AWgaeAQIk",
        authDomain: "module-2-spring-2023.firebaseapp.com",
        databaseURL:
          "https://fir-revision-d615c-default-rtdb.asia-southeast1.firebasedatabase.app",
        projectId: "module-2-spring-2023",
        storageBucket: "module-2-spring-2023.appspot.com",
        messagingSenderId: "399042347819",
        appId: "1:399042347819:web:d6849406aad272a6a5bb6e",
      };

      // Initialize Firebase
      const app = initializeApp(firebaseConfig);

      const db = getDatabase(app);

      function writeUserData(userId, name, email, imageUrl) {
        // const db = getDatabase();
        set(ref(db, "users/" + userId), {
          username: name,
          email: email,
          profile_picture: imageUrl,
        });
      }
      // writeUserData(
      //   "adnairfan",
      //   "Adnan",
      //   "adnan@gmail.com",
      //   "https://accounts.google.com/SignOutOptions?hl=en&continue=https://firebase.google.com/_d/profile/ogb%3Fhl%3Den%26authuser%3D0"
      // );
      const submitBtn = document.getElementById("submit");
      console.log(submitBtn);

      submitBtn.onclick = (event) => {
        event.preventDefault();
        console.log("On Submit", event);
        const username = document.getElementById("username");
        const name = document.getElementById("name");
        const email = document.getElementById("email");
        const imageUrl = document.getElementById("imageUrl");
        writeUserData(username.value, name.value, email.value, imageUrl.value);
      };
    </script>
    <script></script>
  </head>
  <body>
    <h1>User Form</h1>
    <form>
      <input type="text" name="username" id="username" placeholder="Username" />
      <input type="text" name="name" id="name" placeholder="Name" />
      <input type="text" name="email" id="email" placeholder="Email" />
      <input
        type="text"
        name="imageUrl"
        id="imageUrl"
        placeholder="Image Url"
      />
      <input type="button" id="submit" value="Submit" />
    </form>
  </body>
</html>
